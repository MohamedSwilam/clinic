(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{164:function(e,s,r){"use strict";var n=r(35);r.n(n).a},165:function(e,s,r){(e.exports=r(2)(!1)).push([e.i,".centerx li {\n  display: inline-flex;\n  margin: 10px;\n}\n",""])},315:function(e,s,r){"use strict";r.r(s);r(16).a.localize("en",{custom:{role_name:{required:"Please enter the role name"}}});var n={mounted:function(){this.getPermissions()},data:function(){return{role_name:"",permissions:[],rolePermissions:[],groupPermissions:[],is_requesting:!1}},computed:{validateForm:function(){return!this.errors.any()&&""!==this.role_name}},methods:{getPermissions:function(){var e=this;this.$vs.loading({container:this.$refs.create.$refs.content,scale:.5}),this.$store.dispatch("rolesAndPermissions/getPermissions").then((function(s){e.$vs.loading.close(e.$refs.create.$refs.content),e.permissions=s.data.data})).catch((function(s){console.log(s),e.$vs.loading.close(e.$refs.create.$refs.content),e.$vs.notify({title:"Error",text:s.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},createRole:function(){var e=this;this.validateForm&&(this.is_requesting=!0,this.$vs.loading({container:"#btn-create",color:"primary",scale:.45}),this.$store.dispatch("rolesAndPermissions/create",{rolePermissions:this.rolePermissions,name:this.role_name,display_name:this.role_name}).then((function(s){e.is_requesting=!1,e.$vs.loading.close("#btn-create > .con-vs-loading"),e.$vs.notify({title:"Success",text:s.data.message,iconPack:"feather",icon:"icon-check",color:"success"})})).catch((function(s){console.log(s),e.is_requesting=!1,e.$vs.loading.close("#btn-create > .con-vs-loading"),e.$vs.notify({title:"Error",text:s.response.data.errors[Object.keys(s.response.data.errors)[0]][0],iconPack:"feather",icon:"icon-alert-circle",color:"danger"})})))},groupPressed:function(e){if(this.groupPermissions.includes(e[0].group))for(var s=0;s<e.length;s++)this.rolePermissions.includes(e[s].name)||this.rolePermissions.push(e[s].name);else for(var r=0;r<e.length;r++)this.rolePermissions.includes(e[r].name)&&this.rolePermissions.splice(this.rolePermissions.indexOf(e[r].name),1)},vs_alert:function(e,s,r,n){this.$vs.notify({title:e,text:s,color:r,iconPack:"feather",icon:n})}}},i=(r(164),r(1)),o=Object(i.a)(n,(function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[e.can("create-role")?r("div",{staticClass:"vx-col w-full mb-base"},[r("vx-card",{ref:"create",attrs:{title:"Create New Role"}},[r("vs-row",[r("vs-col",{staticClass:"mb-5 pl-5",attrs:{"vs-lg":"12","vs-sm":"12","vs-xs":"12"}},[r("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{danger:e.errors.has("role_name"),"danger-text":e.errors.first("role_name"),"val-icon-danger":"clear","icon-pack":"feather",icon:"icon-shield","icon-no-border":"","label-placeholder":"Role Name",name:"role_name"},model:{value:e.role_name,callback:function(s){e.role_name=s},expression:"role_name"}})],1),e._v(" "),r("vs-col",{staticClass:"mb-5 pl-5",attrs:{"vs-lg":"12","vs-sm":"12","vs-xs":"12"}},[r("div",{staticClass:"vx-col w-full"},[r("b",[e._v("Role Permissions:")]),e._v(" "),e._l(e.permissions,(function(s,n){return r("ul",[r("br"),e._v(" "),r("vs-checkbox",{attrs:{"vs-value":n},on:{change:function(r){return e.groupPressed(s)}},model:{value:e.groupPermissions,callback:function(s){e.groupPermissions=s},expression:"groupPermissions"}},[r("b",[e._v(e._s(n))])]),e._v(" "),e._l(s,(function(s,n){return r("li",{key:n,staticClass:"ml-8"},[r("vs-checkbox",{attrs:{"vs-value":s.name},model:{value:e.rolePermissions,callback:function(s){e.rolePermissions=s},expression:"rolePermissions"}},[e._v(e._s(s.display_name))])],1)}))],2)}))],2)])],1),e._v(" "),r("vs-divider"),e._v(" "),r("vs-row",{attrs:{"vs-justify":"center","vs-align":"center"}},[r("vs-button",{staticClass:"vs-con-loading__container",attrs:{id:"btn-create",disabled:!e.validateForm,"icon-pack":"feather",icon:"icon-save"},on:{click:function(s){e.is_requesting?e.$store.dispatch("viewWaitMessage",e.$vs):e.createRole()}}},[e._v("Create Role")])],1)],1)],1):e._e()])}),[],!1,null,null,null);s.default=o.exports},35:function(e,s,r){var n=r(165);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(3)(n,i);n.locals&&(e.exports=n.locals)}}]);