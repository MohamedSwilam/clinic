(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{174:function(t,e,s){"use strict";var n=s(40);s.n(n).a},175:function(t,e,s){(t.exports=s(2)(!1)).push([t.i,".txt-hover:hover{\n  cursor: pointer;\n  color: black !important;\n}\n",""])},322:function(t,e,s){"use strict";s.r(e);var n={name:"profile",mounted:function(){this.getEmployeeData()},data:function(){return{employee:null,searchText:"",appointments:[],currentPage:1,sortFilter:"sortDesc=id",paginate:15,total_pages:0,filterBy:"date",is_requesting:!1,statuses:[{id:1,name:"Coming",color:"#7467F0"},{id:2,name:"Inside",color:"#EA5455"},{id:3,name:"Postponed",color:"#FF9F42"},{id:4,name:"Finished",color:"#27C76F"}]}},methods:{getEmployeeData:function(){var t=this;this.$vs.loading({container:this.$refs.view.$refs.content,scale:.5}),this.$store.dispatch("employee/view",this.$store.getters["auth/userData"].id).then((function(e){t.employee=e.data.data.data,t.$vs.loading.close(t.$refs.view.$refs.content),3===t.employee.roles[0].id&&t.getAppointments()})).catch((function(e){console.log(e),t.$vs.loading.close(t.$refs.view.$refs.content),t.$vs.notify({title:"Error",text:e.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},getAppointments:function(){var t=this;this.$vs.loading({container:this.$refs.browse.$refs.content,scale:.5}),this.$store.dispatch("appointment/getData","?page=".concat(this.currentPage,"&paginate=").concat(this.paginate,"&").concat(this.sortFilter,"&").concat(this.filterBy,"=").concat(this.searchText,"&doctor=").concat(this.$store.getters["auth/userData"].id)).then((function(e){t.$vs.loading.close(t.$refs.browse.$refs.content),t.appointments=e.data.data.data,t.total_pages=e.data.data.meta.pagination.total_pages})).catch((function(e){console.log(e),t.$vs.loading.close(t.$refs.browse.$refs.content),t.$vs.notify({title:"Error",text:e.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},updateStatus:function(t,e,s){var n=this;this.is_requesting=!0,this.$vs.loading({container:"#update-status-btn-".concat(e,"-").concat(s),color:"danger",scale:.45}),this.$store.dispatch("appointment/update",{id:e,data:{status_id:s,has_payment:0}}).then((function(a){n.is_requesting=!1,n.appointments[t].status_id=s,n.appointments[t].status=n.statuses.filter((function(t){return t.id===s}))[0],n.$vs.loading.close("#update-status-btn-".concat(e,"-").concat(s," > .con-vs-loading")),n.$vs.notify({title:"Success",text:a.data.message,iconPack:"feather",icon:"icon-check",color:"success"})})).catch((function(t){console.log(t),n.is_requesting=!1,n.$vs.loading.close("update-status-btn-".concat(e,"-").concat(s," > .con-vs-loading")),n.$vs.notify({title:"Error",text:t.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},confirmDeleteAppointment:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"Are you sure!",text:"This data can not be retrieved again.",accept:this.deleteAppointment,parameters:[t]})},deleteAppointment:function(t){var e=this;this.is_requesting=!0,this.$vs.loading({container:"#btn-delete-".concat(t[0].id),color:"danger",scale:.45}),this.$store.dispatch("appointment/delete",t[0].id).then((function(s){e.is_requesting=!1,e.$vs.loading.close("#btn-delete-".concat(t[0].id," > .con-vs-loading")),e.appointments=e.appointments.filter((function(e){return e.id!==t[0].id})),e.$vs.notify({title:"Success",text:s.data.message,iconPack:"feather",icon:"icon-check",color:"success"})})).catch((function(s){console.log(s),e.is_requesting=!1,e.$vs.loading.close("#btn-delete-".concat(t[0].id," > .con-vs-loading")),e.$vs.notify({title:"Error",text:s.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},handleSearch:function(){this.currentPage=1,this.getAppointments()},handleSort:function(t,e){this.sortFilter=e?"sortDesc=".concat(t):"sortAsc=".concat(t),this.currentPage=1,this.getAppointments()},handleChangePage:function(){this.getAppointments()},copyToClipboard:function(t){if(window.clipboardData&&window.clipboardData.setData)return this.onCopy(),clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return this.onCopy(),document.execCommand("copy")}catch(t){return this.onError(),!1}finally{document.body.removeChild(e)}}},onCopy:function(){this.$vs.notify({title:"Success!",text:"Text copied successfully.",color:"success",iconPack:"feather",position:"bottom-right",icon:"icon-check-circle"})},onError:function(){this.$vs.notify({title:"Failed!",text:"Error in copying text.",color:"danger",iconPack:"feather",position:"bottom-right",icon:"icon-alert-circle"})}}},a=(s(174),s(1)),o=Object(a.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"vx-col w-full mb-base"},[s("vx-card",{ref:"view",attrs:{title:"Personal Information",collapseAction:""}},[t.employee?s("vs-row",[s("vs-row",{staticClass:"mb-5"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[s("vs-avatar",{staticClass:"mx-auto mb-2 block",attrs:{size:"120px",src:t.employee.image}})],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t._v("\n                        "+t._s(t.employee.first_name)+" "+t._s(t.employee.last_name)+"\n                    ")])],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t._v("\n                        "+t._s(t.employee.roles[0].name)+"\n                    ")])],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t._v("\n                        "+t._s(t.employee.email)+"\n                    ")])],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t._v("\n                        Birth Date: "+t._s(t.employee.birth_date)+"\n                    ")])],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t._v("\n                        Address: "+t._s(t.employee.address)+" - "+t._s(t.employee.city)+", "+t._s(t.employee.country)+"\n                    ")])],1),t._v(" "),s("vs-row",{staticClass:"mb-2"},[s("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[s("p",{staticClass:"text-grey"},[t._l(t.employee.phones,(function(e,n){return[s("span",{staticClass:"txt-hover",on:{click:function(s){return t.copyToClipboard(e.number)}}},[t._v(t._s(e.number))]),t._v(" "),n!==t.employee.phones.length-1?[t._v(", ")]:t._e()]})),t._v(" "),0===t.employee.phones.length?[t._v("\n                                No Telephones Assigned!\n                            ")]:t._e()],2)])],1),t._v(" "),s("vs-row",{staticClass:"mt-5 mb-5"},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-justify":"center"}},[s("vs-button",{attrs:{to:"/dashboard/employee/"+t.employee.id+"/edit",color:"warning",type:"filled","icon-pack":"feather",icon:"icon-edit"}},[t._v("Edit Information")])],1)],1)],1):t._e()],1)],1),t._v(" "),t.employee&&3===t.employee.roles[0].id?s("div",{staticClass:"vx-col w-full mb-base"},[s("vx-card",{ref:"browse",attrs:{title:"Appointments",collapseAction:"",refreshContentAction:""},on:{refresh:t.getAppointments}},[s("vs-table",{attrs:{sst:!0,data:t.appointments},on:{sort:t.handleSort},scopedSlots:t._u([{key:"default",fn:function(e){e.data;return[t._l(t.appointments,(function(e,n){return[s("vs-tr",{key:n},[s("vs-td",{attrs:{data:n+1}},[t._v("\n                                "+t._s(n+1)+"\n                            ")]),t._v(" "),s("vs-td",[t._v("\n                                "+t._s(e.patient.id)+"\n                            ")]),t._v(" "),s("vs-td",[t._v("\n                                "+t._s(e.patient.first_name)+" "+t._s(e.patient.last_name)+"\n                            ")]),t._v(" "),s("vs-td",[t._v("\n                                "+t._s(e.reservation_duration.date)+"\n                            ")]),t._v(" "),s("vs-td",[t._v("\n                                "+t._s(new Date(e.reservation_duration.date+" "+e.reservation_duration.start_time).toLocaleTimeString())+"\n                            ")]),t._v(" "),s("vs-td",[t._v("\n                                "+t._s(new Date(e.reservation_duration.date+" "+e.reservation_duration.end_time).toLocaleTimeString())+"\n                            ")]),t._v(" "),s("vs-td",[s("vs-chip",{attrs:{color:e.status.color}},[t._v(t._s(e.status.name))])],1),t._v(" "),s("vs-td",[s("div",{staticClass:"flex mb-4"},[t.can("view-patient")?s("vs-button",{attrs:{to:"/dashboard/patient/"+e.patient.id,radius:"",color:"primary",type:"border","icon-pack":"feather",icon:"icon-eye"}}):t._e(),t._v(" "),t.can("delete-appointment")?s("vs-button",{staticClass:"ml-3",attrs:{id:"btn-delete-"+e.id,radius:"",color:"danger",type:"border","icon-pack":"feather",icon:"icon-trash"},on:{click:function(s){return t.confirmDeleteAppointment(e)}}}):t._e()],1)]),t._v(" "),s("template",{staticClass:"expand-user",slot:"expand"},[s("div",{staticClass:"con-expand-users w-full"},[s("vs-list",[s("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-arrow-right",title:"Payments"}},[t._v("\n                                            Paid "),s("b",[t._v(t._s(e.payment[0].paid)+" EGP")]),t._v(" Out of "),s("b",[t._v(t._s(e.payment[0].to_be_paid)+" EGP")])]),t._v(" "),s("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-arrow-right",title:"Type: "+e.reservation_type.name}}),t._v(" "),s("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-arrow-right",title:"Doctor: "+e.doctor.first_name+" "+e.doctor.last_name}}),t._v(" "),s("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-arrow-right",title:"Illness Description: "+e.illness_description}}),t._v(" "),s("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-arrow-right",title:"Update Status"}},t._l(t.statuses,(function(a,o){return s("vs-button",{key:o,staticClass:"ml-3",attrs:{id:"update-status-btn-"+e.id+"-"+a.id,size:"small",color:a.color,type:e.status.id===a.id?"filled":"border","icon-pack":"feather"},on:{click:function(s){t.is_requesting?t.$store.dispatch("viewWaitMessage",t.$vs):t.updateStatus(n,e.id,a.id)}}},[t._v(t._s(a.name))])})),1)],1)],1)])],2)]}))]}}],null,!1,1214801419)},[s("template",{slot:"header"},[s("vs-row",[s("vs-col",{attrs:{"vs-lg":"6","vs-sm":"12","vs-xs":"12"}},[s("vs-button",{attrs:{size:"small",to:"/dashboard/appointment/add-appointment/new","icon-pack":"feather",icon:"icon-plus",type:"filled"}},[t._v("Add Appointment")])],1),t._v(" "),s("vs-col",{staticClass:"mb-5",attrs:{"vs-lg":"3","vs-sm":"6","vs-xs":"6"}},[s("vs-select",{staticClass:"selectExample",attrs:{autocomplete:"","icon-pack":"feather",icon:"icon-filter"},model:{value:t.filterBy,callback:function(e){t.filterBy=e},expression:"filterBy"}},[s("vs-select-item",{attrs:{value:"date",text:"Date"}}),t._v(" "),s("vs-select-item",{attrs:{value:"status",text:"Status"}}),t._v(" "),s("vs-select-item",{attrs:{value:"patient",text:"Patient ID"}}),t._v(" "),s("vs-select-item",{attrs:{value:"patientName",text:"Patient Name"}})],1)],1),t._v(" "),s("vs-col",{staticClass:"mb-5",attrs:{"vs-lg":"3","vs-sm":"6","vs-xs":"6"}},[s("vs-input",{attrs:{"icon-pack":"feather",icon:"icon-search","icon-after":"",placeholder:"search"},on:{change:t.handleSearch},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)],1)],1),t._v(" "),s("template",{slot:"thead"},[s("vs-th",[t._v("#")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"patient_id"}},[t._v("ID")]),t._v(" "),s("vs-th",[t._v("Name")]),t._v(" "),s("vs-th",[t._v("Date")]),t._v(" "),s("vs-th",[t._v("From")]),t._v(" "),s("vs-th",[t._v("To")]),t._v(" "),s("vs-th",{attrs:{"sort-key":"status"}},[t._v("Status")]),t._v(" "),s("vs-th",[t._v("Action")])],1)],2),t._v(" "),s("vs-pagination",{staticClass:"mt-5",attrs:{goto:"",total:t.total_pages},on:{change:t.handleChangePage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):t._e()])}),[],!1,null,null,null);e.default=o.exports},40:function(t,e,s){var n=s(175);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};s(3)(n,a);n.locals&&(t.exports=n.locals)}}]);