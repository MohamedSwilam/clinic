(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{152:function(e,a,t){"use strict";var s=t(30);t.n(s).a},153:function(e,a,t){(e.exports=t(2)(!1)).push([e.i,'.dob-input{\n  padding-bottom: 7px !important;\n  padding-top: 7px !important;\n}\ninput[type=date]:invalid::-webkit-datetime-edit {\n  color: rgb(220, 220, 220) !important;\n}\n.gender-container{\n  padding-top: 9px !important;\n}\n.gender-placeholder {\n  transform: translate(-3px,-70%)!important;\n}\n.image-preview {\n  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n  padding-right: 20px;\n  top: 6px;\n  position: relative;\n}\n#img-upload {\n  display: none;\n}\nimg.preview {\n  width: 55px;\n  height: 55px;\n  border-radius: 50%;\n  background-color: white;\n  border: 1px solid #DDD;\n  padding: 5px;\n}\n.input-btn {\n  position: relative;\n  top: 17px;\n  left: -33px;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.vs-input-number {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n',""])},30:function(e,a,t){var s=t(153);"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(3)(s,r);s.locals&&(e.exports=s.locals)},307:function(e,a,t){"use strict";t.r(a);var s={name:"edit-employee",mounted:function(){this.getRoles()},computed:{validateForm:function(){return!this.errors.any()&&""!==this.form.first_name&&""!==this.form.last_name&&""!==this.form.email&&""!==this.form.address&&""!==this.form.country&&""!==this.form.city&&""!==this.form.password&&""!==this.form.confirm_password}},data:function(){return{roles:[],form:{email:"",password:"",confirm_password:"",first_name:"",last_name:"",birth_date:"",address:"",city:"",country:"",gender:"",image:null,role:"",phones:[]},uploadedImage:null,Telephone:"",is_requesting:!1}},methods:{getRoles:function(){var e=this;this.$vs.loading({container:this.$refs.edit.$refs.content,scale:.5}),this.$store.dispatch("rolesAndPermissions/getRoles","").then((function(a){e.roles=a.data.data.data,e.getEmployeeData(),e.form.role=e.roles[0].name})).catch((function(a){console.log(a),e.$vs.notify({title:"Error",text:a.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},getEmployeeData:function(){var e=this;this.$store.dispatch("employee/view",this.$route.params.id).then((function(a){e.$vs.loading.close(e.$refs.edit.$refs.content),e.form=a.data.data.data,e.form.role=a.data.data.data.roles[0].name,e.uploadedImage=e.form.image?e.form.image:"/images/avatar-s-11.png",e.form.image=null})).catch((function(a){console.log(a),e.$vs.loading.close(e.$refs.edit.$refs.content),e.$vs.notify({title:"Error",text:a.response.data.error,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},edit:function(){var e=this;if(this.validateForm){this.is_requesting=!0,this.$vs.loading({container:"#btn-edit",color:"primary",scale:.45});var a=new FormData;for(var t in this.form)if("image"===t&&this.form.hasOwnProperty(t)){if(this.form[t])for(var s=0;s<this.form[t].length;s++)a.append(t,this.form[t][s])}else"phones"===t?a.append(t,JSON.stringify(this.form[t])):"password"===t?""!==this.form[t]&&a.append(t,JSON.stringify(this.form[t])):a.append(t,this.form[t]);this.$store.dispatch("employee/update",{id:this.$route.params.id,data:a}).then((function(a){e.is_requesting=!1,e.$vs.loading.close("#btn-edit > .con-vs-loading"),e.$router.push("/dashboard/employee/".concat(e.$route.params.id)),e.$vs.notify({title:"Success",text:a.data.message,iconPack:"feather",icon:"icon-check",color:"success"})})).catch((function(a){console.log(a),e.is_requesting=!1,e.$vs.loading.close("#btn-edit > .con-vs-loading"),e.$vs.notify({title:"Error",text:a.response.data.errors[Object.keys(a.response.data.errors)[0]][0],iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))}},previewImage:function(e){var a=this,t=e.target;if(t.files&&t.files[0]){var s=new FileReader;s.onload=function(e){a.uploadedImage=e.target.result,a.form.image=t.files},s.readAsDataURL(t.files[0])}},removeTelephone:function(e){this.form.phones.splice(this.form.phones.indexOf(e),1)},addTelephone:function(){""!==this.Telephone&&(this.form.phones.push({country_code:"+20",number:this.Telephone}),this.Telephone="")}}},r=(t(152),t(1)),i=Object(r.a)(s,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[e.can("edit-user")||e.$store.getters["auth/userData"].id===e.$route.params.id?t("div",{staticClass:"vx-col w-full mb-base"},[t("vx-card",{ref:"edit",attrs:{title:"Edit Employee"}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mb-6"},[t("vs-select",{staticClass:"w-full",attrs:{label:"Employee Role",autocomplete:"","label-placeholder":"Employee Role","icon-pack":"feather",icon:"icon-chevron-down",color:"primary"},model:{value:e.form.role,callback:function(a){e.$set(e.form,"role",a)},expression:"form.role"}},e._l(e.roles,(function(e,a){return t("vs-select-item",{key:a,attrs:{value:e.name,text:e.name}})})),1)],1)]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("div",{staticClass:"image-preview",staticStyle:{display:"inline-flex"}},[e.uploadedImage?t("img",{staticClass:"preview",attrs:{alt:"employee photo",src:e.uploadedImage}}):e._e()]),e._v(" "),t("div",{staticStyle:{display:"inline-flex",position:"relative",top:"-15px"}},[t("input",{attrs:{id:"img-upload",type:"file",accept:"image/*"},on:{change:e.previewImage}}),e._v(" "),t("vs-button",{attrs:{size:"small","icon-pack":"feather",icon:"icon-upload",type:"gradient",onclick:"document.getElementById('img-upload').click()"}},[e._v("Upload Employee Photo")])],1)]),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("div",{staticClass:"vs-component vs-con-input-label vs-input w-full vs-input-primary is-label-placeholder"},[t("div",{staticClass:"gender-container"},[t("vs-radio",{attrs:{"vs-value":"Male"},model:{value:e.form.gender,callback:function(a){e.$set(e.form,"gender",a)},expression:"form.gender"}},[e._v("Male")]),e._v("\n                              \n                            "),t("vs-radio",{attrs:{"vs-value":"Female"},model:{value:e.form.gender,callback:function(a){e.$set(e.form,"gender",a)},expression:"form.gender"}},[e._v("Female")]),e._v(" "),t("span",{staticClass:"input-span-placeholder vs-input--placeholder normal normal vs-placeholder-label gender-placeholder"},[e._v("\n                            Gender\n                            ")])],1),e._v(" "),t("span")])])]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash|min:3",expression:"'required|alpha_dash|min:3'"}],staticClass:"w-full",attrs:{name:"first_name",danger:e.errors.has("first_name"),"val-icon-danger":"clear","danger-text":e.errors.first("first_name"),"icon-pack":"feather",icon:"icon-user","label-placeholder":"First Name"},model:{value:e.form.first_name,callback:function(a){e.$set(e.form,"first_name",a)},expression:"form.first_name"}})],1),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash|min:3",expression:"'required|alpha_dash|min:3'"}],staticClass:"w-full",attrs:{name:"last_name",danger:e.errors.has("last_name"),"val-icon-danger":"clear","danger-text":e.errors.first("last_name"),"icon-pack":"feather",icon:"icon-user","label-placeholder":"Last Name"},model:{value:e.form.last_name,callback:function(a){e.$set(e.form,"last_name",a)},expression:"form.last_name"}})],1)]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("div",{staticClass:"vs-component vs-con-input-label vs-input w-full vs-input-primary is-label-placeholder"},[t("div",{staticClass:"vs-con-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.birth_date,expression:"form.birth_date"}],staticClass:"vs-inputx vs-input--input normal hasIcon hasValue dob-input",staticStyle:{border:"1px solid rgba(0, 0, 0, 0.2)"},attrs:{required:"",type:"date"},domProps:{value:e.form.birth_date},on:{input:function(a){a.target.composing||e.$set(e.form,"birth_date",a.target.value)}}}),e._v(" "),t("span",{staticClass:"input-span-placeholder vs-input--placeholder normal normal vs-placeholder-label"},[e._v("\n                            Date of birth\n                            ")]),e._v(" "),t("i",{staticClass:"vs-icon notranslate icon-scale icon-inputx notranslate vs-input--icon feather icon-calendar null"})]),e._v(" "),t("span")])]),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"address",danger:e.errors.has("address"),"val-icon-danger":"clear","danger-text":e.errors.first("address"),"icon-pack":"feather",icon:"icon-map-pin","label-placeholder":"Address"},model:{value:e.form.address,callback:function(a){e.$set(e.form,"address",a)},expression:"form.address"}})],1)]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"city",danger:e.errors.has("city"),"val-icon-danger":"clear","danger-text":e.errors.first("city"),"icon-pack":"feather",icon:"icon-map-pin","label-placeholder":"City"},model:{value:e.form.city,callback:function(a){e.$set(e.form,"city",a)},expression:"form.city"}})],1),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"country",danger:e.errors.has("country"),"val-icon-danger":"clear","danger-text":e.errors.first("country"),"icon-pack":"feather",icon:"icon-map-pin","label-placeholder":"Country"},model:{value:e.form.country,callback:function(a){e.$set(e.form,"country",a)},expression:"form.country"}})],1)]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-row",[t("vs-col",{attrs:{"vs-w":"9"}},[t("vs-input",{staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-phone","label-placeholder":"Telephone(s)"},on:{keydown:function(a){13===a.keyCode&&e.addTelephone()}},model:{value:e.Telephone,callback:function(a){e.Telephone=a},expression:"Telephone"}})],1),e._v(" "),t("vs-col",{attrs:{"vs-w":"3"}},[t("vs-button",{staticClass:"w-full input-btn",attrs:{"icon-pack":"feather",icon:"icon-plus",type:"gradient"},on:{click:e.addTelephone}},[e._v("Add")])],1)],1),e._v(" "),t("br"),e._v(" "),t("vs-row",[t("vs-col",{attrs:{"vs-w":"12"}},e._l(e.form.phones,(function(a,s){return t("vs-chip",{key:s,attrs:{closable:""},on:{click:function(t){return e.removeTelephone(a)}}},[e._v("\n                                "+e._s(a.number)+"\n                            ")])})),1)],1)],1),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{name:"email",danger:e.errors.has("email"),"val-icon-danger":"clear","danger-text":e.errors.first("email"),"icon-pack":"feather",icon:"icon-mail","label-placeholder":"Email"},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}})],1)]),e._v(" "),t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10",expression:"'min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{name:"password",danger:e.errors.has("password"),"val-icon-danger":"clear","danger-text":e.errors.first("password"),type:"password","icon-pack":"feather",icon:"icon-lock","label-placeholder":"Password"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1),e._v(" "),t("div",{staticClass:"vx-col sm:w-1/2 w-full mb-6"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10|confirmed:password",expression:"'min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password",name:"confirm_password",danger:e.errors.has("confirm_password"),"val-icon-danger":"clear","danger-text":e.errors.first("confirm_password"),"icon-pack":"feather",icon:"icon-lock","label-placeholder":"Confirm Password"},model:{value:e.form.confirm_password,callback:function(a){e.$set(e.form,"confirm_password",a)},expression:"form.confirm_password"}})],1)]),e._v(" "),t("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[t("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"12"}},[t("vs-button",{attrs:{id:"btn-edit",disabled:!e.validateForm,"icon-pack":"feather",icon:"icon-save",type:"gradient"},on:{click:function(a){e.is_requesting?e.$store.dispatch("viewWaitMessage",e.$vs):e.edit()}}},[e._v("Edit Employee")])],1)],1)],1)],1):e._e()])}),[],!1,null,null,null);a.default=i.exports}}]);